diff --git a/data/panel.js b/data/panel.js
index 12ea28d..4acd7c8 100644
--- a/data/panel.js
+++ b/data/panel.js
@@ -23,19 +23,17 @@ self.on("message", function(message) {
   let links = document.getElementsByTagName("a");
   for (let i = 0; i < links.length; i++) {
     links[i].classList.add("theme-link");
-    links[i].addEventListener("click", function(e) {
-      e.stopPropagation();
-      e.preventDefault();
-      }, false);
+    links[i].addEventListener("click", handleLinkClick, false);
   }
 
   let visitPage = document.getElementById("visit-page-button");
+  visitPage.href = message.url;
   visitPage.addEventListener("click", handleLinkClick, false);
 });
 
 function handleLinkClick(e) {
   e.stopPropagation();
   e.preventDefault();
-  let target = propertyName + '?utm_campaign=search-api&utm_source=firefox&utm_medium=inspector';
-  self.port.emit("open-link", target);
+  let link = e.target.href + '?utm_campaign=search-api&utm_source=firefox&utm_medium=inspector';
+  self.port.emit("open-link", link);
 }
diff --git a/lib/main.js b/lib/main.js
index f9654b5..66dd0fa 100644
--- a/lib/main.js
+++ b/lib/main.js
@@ -10,7 +10,9 @@ Cu.import("resource:///modules/devtools/gDevTools.jsm");
 Cu.import("resource://gre/modules/devtools/Loader.jsm");
 
 const cssPropertyNameClass = "ruleview-propertyname";
-const linkBase = "https://developer.mozilla.org/en-US/docs/Web/CSS/";
+const mdnURLBase = "https://developer.mozilla.org/";
+const linkPath = "en-US/docs/Web/CSS/";
+const resourceURLBase = "resource://jid1-ydgybbntgcqnxw-at-jetpack/";
 let currentCssProperty = "";
 let currentNode = undefined;
 let currentOverviewText = "";
@@ -90,7 +92,6 @@ function handleMousemove(e) {
 function getTheDocSummary() {
   let mdnRequest = require("sdk/request").Request({
     url: "https://developer.mozilla.org/en-US/docs/CSS/" + currentCssProperty + "$json",
-//    url: "https://developer.mozilla.org/en-US/search.json?q=" + currentCssProperty + "&topic=css",
     onComplete: getTheExample
   });
   mdnRequest.get();
@@ -106,7 +107,7 @@ function getTheExample(response) {
   if (response.status == 200) {
     let json = response.json;
     currentOverviewText = json.summary;
-    currentURL = linkBase + currentCssProperty;
+    currentURL = mdnURLBase + linkPath + currentCssProperty;
     css.getExample(currentNode.textContent, gotExample);
   }
 }
@@ -135,7 +136,14 @@ function gotExample(example) {
 
 /*handle the tooltip panel asking us to open the MDN page*/
 function openLink(link) {
-  link = linkBase + link;
+  // if the link starts with the resource://my-id, replace it with developer.mozilla.org
+  console.log(link);
+  console.log(resourceURLBase);
+  if (link.indexOf(resourceURLBase) ==0) {
+    console.log("replacing");
+    link = link.replace(resourceURLBase, mdnURLBase);
+  }
+  //link = linkBase + link;
   tabs.open({
     url: link,
     inBackground: true
